import{j as u}from"./jsx-runtime-9c4ae004.js";import{g as _,r as o}from"./index-1b03fe98.js";import{u as E,C as N}from"./rdk-b7736295.js";import{F as O}from"./focus-trap-react-b3e8c062.js";import{c as j}from"./index-91038615.js";import{a as v}from"./motion-a93435c4.js";const{useState:q,useCallback:b,useEffect:F}=o;var V=function(e){const t=[],h=()=>t.forEach(i=>i());let s=e instanceof Function?e():e;return function(){const d=q({})[1],r=b(()=>d({}),[d]);F(()=>(t.push(r),()=>{t.splice(t.findIndex(r),1)}),[r]);const p=b(a=>{a instanceof Function?s=a(s):s=a,h()},[r]);return[s,p]}};const G=_(V),M="_enabled_ftw1e_1",S={enabled:M},I=G([]),y=({children:f,content:e,disabled:t,triggerClassName:h,triggerOpenClassName:s,autofocus:i,autoClose:d,...r})=>{const p=E(),[a,l]=I(),[g,n]=o.useState(!1),k=o.useCallback(()=>{t||(a.forEach(C=>C(!1)),n(!0),l([n]))},[t,n,l,a]),c=o.useCallback(()=>{n(!1),l([])},[n,l]),x=o.useCallback(()=>{n(!1),l(a.filter(C=>C!==n))},[a,l]),m=o.useCallback(()=>{c()},[c]);return o.useEffect(()=>{g&&c()},[c]),u.jsx(N,{placement:"bottom-start",triggerElement:"span",...r,triggerClassName:j(h,{[s]:g,[S.enabled]:!t}),trigger:"contextmenu",open:g,content:()=>u.jsx(v.div,{initial:{opacity:0,y:-25},animate:{opacity:1,y:0},exit:{opacity:0,y:-25},onClick:()=>d&&(m==null?void 0:m()),children:i?u.jsx(O,{focusTrapOptions:{escapeDeactivates:!0,clickOutsideDeactivates:!0,fallbackFocus:`#${p}`},children:u.jsx("div",{id:p,tabIndex:-1,children:typeof e=="function"?e({closeAll:c,close:x}):e})}):u.jsx(u.Fragment,{children:typeof e=="function"?e({closeAll:c,close:x}):e})}),onOpen:k,onClose:m,children:f})};y.defaultProps={autofocus:!0,autoClose:!0,closeOnEscape:!0,closeOnBodyClick:!0};try{y.displayName="ContextMenu",y.__docgenInfo={description:"",displayName:"ContextMenu",props:{children:{defaultValue:null,description:"Child element to trigger the context menu.",name:"children",required:!0,type:{name:"ReactNode"}},content:{defaultValue:null,description:"Content to show in the context menu.",name:"content",required:!0,type:{name:"any"}},disabled:{defaultValue:null,description:"Whether the context menu is disabled.",name:"disabled",required:!1,type:{name:"boolean"}},autofocus:{defaultValue:{value:"true"},description:"Whether the context menu should autofocus on open.",name:"autofocus",required:!1,type:{name:"boolean"}},autoClose:{defaultValue:{value:"true"},description:"Whether the context menu should close on click.",name:"autoClose",required:!1,type:{name:"boolean"}},triggerClassName:{defaultValue:null,description:"Class name to apply to the trigger element.",name:"triggerClassName",required:!1,type:{name:"string"}},triggerOpenClassName:{defaultValue:null,description:"Class name to apply to the trigger when the context menu is open.",name:"triggerOpenClassName",required:!1,type:{name:"string"}}}}}catch{}export{y as C};
//# sourceMappingURL=ContextMenu-ef93ee68.js.map
